{"version":3,"names":[],"mappings":"","sources":["lcp-beacon.js"],"sourcesContent":["!function o(i,c,a){function r(t,e){if(!c[t]){if(!i[t]){var n=\"function\"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);throw(n=new Error(\"Cannot find module '\"+t+\"'\")).code=\"MODULE_NOT_FOUND\",n}n=c[t]={exports:{}},i[t][0].call(n.exports,function(e){return r(i[t][1][e]||e)},n,n.exports,o,i,c,a)}return c[t].exports}for(var l=\"function\"==typeof require&&require,e=0;e<a.length;e++)r(a[e]);return r}({1:[function(e,t,n){\"use strict\";function u(e){return e.top<=(window.innerHeight||document.documentElement.clientHeight)&&e.left<=(window.innerWidth||document.documentElement.clientWidth)}function m(i){const e=document.querySelectorAll(\"img, video, p, main, div\"),c=[];return e.forEach(t=>{var e=t.getBoundingClientRect();if(0<e.width&&0<e.height&&u(e)){var n=Math.min(e.width,(window.innerWidth||document.documentElement.clientWidth)-e.left)*Math.min(e.height,(window.innerHeight||document.documentElement.clientHeight)-e.top),o=function(e){if(\"IMG\"===e.tagName)return e.src;const t=window.getComputedStyle(e).getPropertyValue(\"background-image\");if(t&&\"none\"!==t)return t.replace(/^url\\(['\"](.+)['\"]\\)$/,\"$1\");return null}(t);if(null!==o){for(let e=0;e<c.length;e++)if(n>c[e].area){c.splice(e,0,{element:t,area:n,imageURL:o}),c.length=Math.min(i,c.length);break}c.length<i&&c.push({element:t,area:n,imageURL:o})}}}),c.map(e=>({element:e.element,imageURL:e.imageURL}))}let p=[];async function o(){let e=new FormData;e.append(\"action\",\"rocket_check_lcp\"),e.append(\"rocket_lcp_nonce\",rocket_lcp_data.nonce),e.append(\"url\",rocket_lcp_data.url),e.append(\"is_mobile\",rocket_lcp_data.is_mobile);await fetch(rocket_lcp_data.ajax_url,{method:\"POST\",credentials:\"same-origin\",body:e});if(!0!==lcp_data.success){var t=window.innerWidth||document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight;if(rocket_lcp_data.is_mobile&&(t>rocket_lcp_data.width_threshold||n>rocket_lcp_data.height_threshold)||!rocket_lcp_data.is_mobile&&(t<rocket_lcp_data.width_threshold||n<rocket_lcp_data.height_threshold))console.log(\"Bailing out because screen size is not acceptable\");else{const d=m(1);0!==d.length?(console.log(\"Estimated LCP element:\",d),p=d.map(e=>({src:e.imageURL,label:\"lcp\"}))):console.log(\"No LCP candidate found.\");for(var o=document.querySelectorAll(\"img\"),i=0;i<o.length;i++){var c=o[i];if(u(c.getBoundingClientRect())){for(var a=c.parentNode;a!==document;){var r=window.getComputedStyle(a).display,l=window.getComputedStyle(a).visibility;if(\"none\"===r||\"hidden\"===l)break;a=a.parentNode}p.some(e=>e.src===c.src)||a!==document||p.push({src:c.src,label:\"above-the-fold\"})}}console.log(p);n=JSON.stringify(p);window.performance_images_json=n,console.log(n);const s=new FormData;s.append(\"action\",\"rocket_lcp\"),s.append(\"rocket_lcp_nonce\",rocket_lcp_data.nonce),s.append(\"url\",rocket_lcp_data.url),s.append(\"is_mobile\",rocket_lcp_data.is_mobile),s.append(\"images\",n),s.append(\"status\",\"success\"),await fetch(rocket_lcp_data.ajax_url,{method:\"POST\",credentials:\"same-origin\",body:s}).then(e=>e.json()).then(e=>{console.log(e)}).catch(e=>{console.error(e)})}}else console.log(\"Bailing out because data is already available\")}\"loading\"!==document.readyState?(console.time(\"extract\"),setTimeout(o,500),console.timeEnd(\"extract\")):document.addEventListener(\"DOMContentLoaded\",async function(){console.time(\"extract\"),setTimeout(o,500),console.timeEnd(\"extract\")})},{}]},{},[1]);"],"file":"lcp-beacon.js"}
