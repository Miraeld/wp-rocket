{"version":3,"names":[],"mappings":"","sources":["lcp-beacon.js"],"sourcesContent":["!function r(o,i,c){function s(t,e){if(!i[t]){if(!o[t]){var n=\"function\"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);throw(n=new Error(\"Cannot find module '\"+t+\"'\")).code=\"MODULE_NOT_FOUND\",n}n=i[t]={exports:{}},o[t][0].call(n.exports,function(e){return s(o[t][1][e]||e)},n,n.exports,r,o,i,c)}return i[t].exports}for(var l=\"function\"==typeof require&&require,e=0;e<c.length;e++)s(c[e]);return s}({1:[function(e,t,n){\"use strict\";function a(e){return 0<=e.top&&0<=e.left&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}function m(e){var t=e.nodeName.toLowerCase();const n={type:\"\",src:\"\",srcset:\"\",sizes:\"\",sources:[],bg_set:[],current_src:\"\"};if(\"img\"===t&&e.srcset)n.type=\"img-srcset\",n.src=e.src,n.srcset=e.srcset,n.sizes=e.sizes,n.current_src=e.currentSrc;else if(\"img\"===t)n.type=\"img\",n.src=e.src,n.current_src=e.currentSrc;else if(\"video\"===t&&e.poster)n.type=\"img\",n.src=e.poster,n.current_src=e.poster;else if(\"picture\"===t)n.type=\"picture\",n.src=e.querySelector(\"img\").src,n.sources=Array.from(e.querySelectorAll(\"source\")).map(e=>({srcset:e.srcset,media:e.media}));else{const r=window.getComputedStyle(e,null),o=[r.getPropertyValue(\"background-image\"),getComputedStyle(e,\":after\").getPropertyValue(\"background-image\"),getComputedStyle(e,\":before\").getPropertyValue(\"background-image\")],i=o.filter(e=>\"none\"!==e).join(\"\");if(n.type=\"bg-img\",i.includes(\"image-set(\")&&(n.type=\"bg-img-set\"),!i||\"\"===i)return null;const c=[...i.matchAll(/url\\(\\s*?['\"]?\\s*?(\\S+?)\\s*?[\"']?\\s*?\\)\\s*?([a-zA-Z0-9\\s]*[x|dpcm|dpi|dppx]?)/gi)];n.bg_set=c.map(e=>e[1]?{src:e[1].trim()+(e[2]?\" \"+e[2].trim():\"\")}:{}),n.bg_set.every(e=>\"\"===e.src)&&(n.bg_set=c.map(e=>e[1]?{src:e[1].trim()}:{})),0<n.bg_set.length&&(n.src=n.bg_set[0].src,\"bg-img-set\"===n.type&&(n.src=n.bg_set))}return n}let u=[];async function r(){const e=function(o){const e=document.querySelectorAll(\"img, video, picture, p, main, div\"),i=[];return e.forEach(t=>{var e=t.getBoundingClientRect();if(0<e.width&&0<e.height&&a(e)){var n=Math.min(e.width,(window.innerWidth||document.documentElement.clientWidth)-e.left)*Math.min(e.height,(window.innerHeight||document.documentElement.clientHeight)-e.top),r=m(t);if(null!==r){for(let e=0;e<i.length;e++)if(n>i[e].area){i.splice(e,0,{element:t,area:n,elementInfo:r}),i.length=Math.min(o,i.length);break}i.length<o&&i.push({element:t,area:n,elementInfo:r})}}}),i.map(e=>({element:e.element,elementInfo:m(e.element)}))}(1);0!==e.length?(console.log(\"Estimated LCP element:\",e),u=e.map(e=>({...e.elementInfo,label:\"lcp\"}))):console.log(\"No LCP candidate found.\");for(var t=document.querySelectorAll(\"img, video, picture, p, main, div\"),n=0;n<t.length;n++){var r=t[n];if(a(r.getBoundingClientRect())){for(var o=r.parentNode;o!==document;){var i=window.getComputedStyle(o).display,c=window.getComputedStyle(o).visibility;if(\"none\"===i||\"hidden\"===c)break;o=o.parentNode}(function(e,t){const n=m(e);return null!==n&&(\"img\"===n.type||\"img-srcset\"===n.type||\"video\"===n.type?t.some(e=>e.src===n.src):\"bg-img\"===n.type||\"bg-img-set\"===n.type?t.some(e=>e.src===n.src):\"picture\"===n.type&&t.some(e=>e.src===n.src))})(r,u)||o!==document||(r=m(r),u.push({...r,label:\"above-the-fold\"}))}}console.log(u);var s=JSON.stringify(u);window.performance_images_json=s;const l=new FormData;l.append(\"action\",\"rocket_lcp\"),l.append(\"rocket_lcp_nonce\",rocket_lcp_data.nonce),l.append(\"url\",rocket_lcp_data.url),l.append(\"is_mobile\",rocket_lcp_data.is_mobile),l.append(\"images\",s),l.append(\"status\",\"success\"),await fetch(rocket_lcp_data.ajax_url,{method:\"POST\",credentials:\"same-origin\",body:l}).then(e=>e.json()).then(e=>{console.log(e)}).catch(e=>{console.error(e)})}\"loading\"!==document.readyState?(console.time(\"extract\"),setTimeout(r,500),console.timeEnd(\"extract\")):document.addEventListener(\"DOMContentLoaded\",async function(){console.time(\"extract\"),setTimeout(r,500),console.timeEnd(\"extract\")})},{}]},{},[1]);"],"file":"lcp-beacon.js"}