!function o(i,c,r){function a(t,e){if(!c[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=c[t]={exports:{}},i[t][0].call(n.exports,function(e){return a(i[t][1][e]||e)},n,n.exports,o,i,c,r)}return c[t].exports}for(var l="function"==typeof require&&require,e=0;e<r.length;e++)a(r[e]);return a}({1:[function(e,t,n){"use strict";function m(i){const e=document.querySelectorAll("img, video, p, main, div"),c=[];return e.forEach(t=>{var e=t.getBoundingClientRect();if(0<e.width&&0<e.height&&0<=e.top&&e.bottom<=window.innerHeight&&0<=e.left&&e.right<=window.innerWidth){var n=e.width*e.height,o=function(e){if("IMG"===e.tagName)return e.src;const t=window.getComputedStyle(e).getPropertyValue("background-image");if(t&&"none"!==t)return t.replace(/^url\(['"](.+)['"]\)$/,"$1");return null}(t);if(null!==o){for(let e=0;e<c.length;e++)if(n>c[e].area){c.splice(e,0,{element:t,area:n,imageURL:o}),c.length=Math.min(i,c.length);break}c.length<i&&c.push({element:t,area:n,imageURL:o})}}}),c.map(e=>({element:e.element,imageURL:e.imageURL}))}let g=[];async function o(){const e=await fetch(rocket_lcp_data.ajax_url,{method:"POST",credentials:"same-origin",body:new URLSearchParams({action:"rocket_check_lcp",url:rocket_lcp_data.url,rocket_lcp_nonce:rocket_lcp_data.nonce})});if(!0!==(await e.json()).success){var t=window.innerWidth||document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight;if(t<rocket_lcp_data.width_threshold||n<rocket_lcp_data.height_threshold)console.log("Bailing out because screen size is not acceptable");else{const s=m(1);0!==s.length?(console.log("Estimated LCP element:",s),g=s.map(e=>({src:e.imageURL,label:"lcp"}))):console.log("No LCP candidate found.");for(var o=document.querySelectorAll("img"),i=0;i<o.length;i++){var c=o[i],r=c.getBoundingClientRect();if(r.top<(window.innerHeight||document.documentElement.clientHeight)&&r.left<(window.innerWidth||document.documentElement.clientWidth)&&0<r.bottom&&0<r.right){for(var a=c.parentNode;a!==document;){var l=window.getComputedStyle(a).display,d=window.getComputedStyle(a).visibility;if("none"===l||"hidden"===d)break;a=a.parentNode}g.some(e=>e.src===c.src)||a!==document||g.push({src:c.src,label:"above-the-fold"})}}console.log(g);n=JSON.stringify(g);window.performance_images_json=n,console.log(n);const u=new FormData;u.append("action","rocket_lcp"),u.append("rocket_lcp_nonce",rocket_lcp_data.nonce),u.append("url",rocket_lcp_data.url),u.append("is_mobile",rocket_lcp_data.is_mobile),u.append("images",n),u.append("status","success"),await fetch(rocket_lcp_data.ajax_url,{method:"POST",credentials:"same-origin",body:u}).then(e=>e.json()).then(e=>{console.log(e)}).catch(e=>{console.error(e)})}}else console.log("Bailing out because data is already available")}"loading"!==document.readyState?(console.time("extract"),setTimeout(o,500),console.timeEnd("extract")):document.addEventListener("DOMContentLoaded",async function(){console.time("extract"),setTimeout(o,500),console.timeEnd("extract")})},{}]},{},[1]);
//# sourceMappingURL=lcp-beacon.js.map
