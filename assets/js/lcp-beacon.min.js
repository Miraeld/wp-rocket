!function r(o,c,i){function s(t,e){if(!c[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=c[t]={exports:{}},o[t][0].call(n.exports,function(e){return s(o[t][1][e]||e)},n,n.exports,r,o,c,i)}return c[t].exports}for(var l="function"==typeof require&&require,e=0;e<i.length;e++)s(i[e]);return s}({1:[function(e,t,n){"use strict";function a(e){return e.top<=(window.innerHeight||document.documentElement.clientHeight)&&e.left<=(window.innerWidth||document.documentElement.clientWidth)}function u(e){var t=e.nodeName.toLowerCase();const n={type:"",src:"",srcset:"",sizes:"",sources:[],bg_set:[],current_src:""};if("img"===t&&e.srcset)n.type="img-srcset",n.src=e.src,n.srcset=e.srcset,n.sizes=e.sizes,n.current_src=e.currentSrc;else if("img"===t)n.type="img",n.src=e.src,n.current_src=e.currentSrc;else if("video"===t&&e.poster)n.type="img",n.src=e.poster,n.current_src=e.poster;else if("picture"===t)n.type="picture",n.src=e.querySelector("img").src,n.sources=Array.from(e.querySelectorAll("source")).map(e=>({srcset:e.srcset,media:e.media}));else{const r=window.getComputedStyle(e,null),o=[r.getPropertyValue("background-image"),getComputedStyle(e,":after").getPropertyValue("background-image"),getComputedStyle(e,":before").getPropertyValue("background-image")],c=o.filter(e=>"none"!==e).join("");if(n.type="bg-img",c.includes("image-set(")&&(n.type="bg-img-set"),!c||""===c)return null;const i=[...c.matchAll(/url\(\s*?['"]?\s*?(\S+?)\s*?["']?\s*?\)\s*?([a-zA-Z0-9\s]*[x|dpcm|dpi|dppx]?)/gi)];n.bg_set=i.map(e=>e[1]?{src:e[1].trim()+(e[2]?" "+e[2].trim():"")}:{}),n.bg_set.every(e=>""===e.src)&&(n.bg_set=i.map(e=>e[1]?{src:e[1].trim()}:{})),0<n.bg_set.length&&(n.src=n.bg_set[0].src,"bg-img-set"===n.type&&(n.src=n.bg_set))}return n}let m=[];async function r(){const e=function(o){const e=document.querySelectorAll("img, video, picture, p, main, div"),c=[];return e.forEach(t=>{var e=t.getBoundingClientRect();if(0<e.width&&0<e.height&&a(e)){var n=Math.min(e.width,(window.innerWidth||document.documentElement.clientWidth)-e.left)*Math.min(e.height,(window.innerHeight||document.documentElement.clientHeight)-e.top),r=u(t);if(null!==r){for(let e=0;e<c.length;e++)if(n>c[e].area){c.splice(e,0,{element:t,area:n,elementInfo:r}),c.length=Math.min(o,c.length);break}c.length<o&&c.push({element:t,area:n,elementInfo:r})}}}),c.map(e=>({element:e.element,elementInfo:u(e.element)}))}(1);0!==e.length?(console.log("Estimated LCP element:",e),m=e.map(e=>({...e.elementInfo,label:"lcp"}))):console.log("No LCP candidate found.");for(var t=document.querySelectorAll("img"),n=0;n<t.length;n++){var r=t[n];if(a(r.getBoundingClientRect())){for(var o=r.parentNode;o!==document;){var c=window.getComputedStyle(o).display,i=window.getComputedStyle(o).visibility;if("none"===c||"hidden"===i)break;o=o.parentNode}m.some(e=>e.src===r.src)||o!==document||m.push({src:r.src,label:"above-the-fold"})}}console.log(m);var s=JSON.stringify(m);window.performance_images_json=s;const l=new FormData;l.append("action","rocket_lcp"),l.append("rocket_lcp_nonce",rocket_lcp_data.nonce),l.append("url",rocket_lcp_data.url),l.append("is_mobile",rocket_lcp_data.is_mobile),l.append("images",s),l.append("status","success"),await fetch(rocket_lcp_data.ajax_url,{method:"POST",credentials:"same-origin",body:l}).then(e=>e.json()).then(e=>{console.log(e)}).catch(e=>{console.error(e)})}"loading"!==document.readyState?(console.time("extract"),setTimeout(r,500),console.timeEnd("extract")):document.addEventListener("DOMContentLoaded",async function(){console.time("extract"),setTimeout(r,500),console.timeEnd("extract")})},{}]},{},[1]);
//# sourceMappingURL=lcp-beacon.js.map
